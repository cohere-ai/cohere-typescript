{"version":3,"file":"cohere.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;ACVa;AACb;AACA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,oCAAoC,mBAAO,CAAC,GAAwB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,qBAAqB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,aAAa,cAAc;AACpG,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;AClHa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,YAAY,mBAAO,CAAC,GAAO;AAC3B,sCAAsC,mBAAO,CAAC,GAAiB;AAC/D;AACA;AACA;AACA,CAAC,kBAAkB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,yBAAyB;AACzB;AACA,8DAA8D,0BAA0B;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;;;;;;;;AC7Ga;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;AClBA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://cohere/webpack/universalModuleDefinition","webpack://cohere/./cohere.ts","webpack://cohere/./services/api_service.ts","webpack://cohere/./services/error_service.ts","webpack://cohere/external node-commonjs \"https\"","webpack://cohere/webpack/bootstrap","webpack://cohere/webpack/before-startup","webpack://cohere/webpack/startup","webpack://cohere/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cohere\"] = factory();\n\telse\n\t\troot[\"cohere\"] = factory();\n})(global, () => {\nreturn ","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar api_service_1 = __importDefault(require(\"./services/api_service\"));\nvar ENDPOINT;\n(function (ENDPOINT) {\n    ENDPOINT[\"GENERATE\"] = \"/generate\";\n    ENDPOINT[\"EMBED\"] = \"/embed\";\n    ENDPOINT[\"CLASSIFY\"] = \"/classify\";\n    ENDPOINT[\"TOKENIZE\"] = \"/tokenize\";\n    ENDPOINT[\"DETOKENIZE\"] = \"/detokenize\";\n    ENDPOINT[\"DETECT_LANGUAGE\"] = \"/detect-language\";\n    ENDPOINT[\"SUMMARIZE\"] = \"/summarize\";\n})(ENDPOINT || (ENDPOINT = {}));\nvar COHERE_EMBED_BATCH_SIZE = 5;\nvar Cohere = /** @class */ (function () {\n    function Cohere() {\n    }\n    Cohere.prototype.init = function (key) {\n        api_service_1.default.init(key);\n    };\n    Cohere.prototype.makeRequest = function (endpoint, data) {\n        return api_service_1.default.post(endpoint, data);\n    };\n    /** Generates realistic text conditioned on a given input.\n     * See: https://docs.cohere.ai/generate-reference\n     */\n    Cohere.prototype.generate = function (config) {\n        return this.makeRequest(ENDPOINT.GENERATE, config);\n    };\n    /** Returns a list of tokens for the specified text.\n     * See: https://docs.cohere.ai/tokenize-reference\n     */\n    Cohere.prototype.tokenize = function (_a) {\n        var text = _a.text;\n        return this.makeRequest(ENDPOINT.TOKENIZE, {\n            text: text,\n        });\n    };\n    /** Returns a string for the specified list of tokens.\n     * See: https://docs.cohere.ai/detokenize-reference\n     */\n    Cohere.prototype.detokenize = function (_a) {\n        var tokens = _a.tokens;\n        return this.makeRequest(ENDPOINT.DETOKENIZE, {\n            tokens: tokens,\n        });\n    };\n    /** Returns text embeddings. An embedding is a list of floating point numbers that captures semantic\n     * information about the text that it represents.\n     * See: https://docs.cohere.ai/embed-reference\n     */\n    Cohere.prototype.embed = function (config) {\n        var _this = this;\n        var createBatches = function (array) {\n            var result = [];\n            for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\n                var value = array_1[_i];\n                var lastArray = result[result.length - 1];\n                if (!lastArray || lastArray.length === COHERE_EMBED_BATCH_SIZE) {\n                    result.push([value]);\n                }\n                else {\n                    lastArray.push(value);\n                }\n            }\n            return result;\n        };\n        return Promise.all(createBatches(config.texts).map(function (texts) {\n            return _this.makeRequest(ENDPOINT.EMBED, __assign(__assign({}, config), { texts: texts }));\n        })).then(function (results) {\n            var embeddings = [];\n            results.forEach(function (result) {\n                embeddings = embeddings.concat(result.body.embeddings);\n            });\n            var meta = results[0].body.meta || undefined;\n            var response = {\n                statusCode: results[0].statusCode,\n                body: {\n                    embeddings: embeddings,\n                    meta: meta,\n                },\n            };\n            return response;\n        });\n    };\n    /**\n     * Classifies text as one of the given labels. Returns a confidence score for each label.\n     * See: https://docs.cohere.ai/classify-reference\n     */\n    Cohere.prototype.classify = function (config) {\n        return this.makeRequest(ENDPOINT.CLASSIFY, config);\n    };\n    Cohere.prototype.detectLanguage = function (config) {\n        return this.makeRequest(ENDPOINT.DETECT_LANGUAGE, config);\n    };\n    Cohere.prototype.summarize = function (config) {\n        return this.makeRequest(ENDPOINT.SUMMARIZE, config);\n    };\n    return Cohere;\n}());\nvar cohere = new Cohere();\nmodule.exports = cohere;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar https = require(\"https\");\nvar error_service_1 = __importDefault(require(\"./error_service\"));\nvar URL;\n(function (URL) {\n    URL[\"COHERE_API\"] = \"api.cohere.ai\";\n})(URL || (URL = {}));\nvar APIImpl = /** @class */ (function () {\n    function APIImpl() {\n        this.COHERE_API_KEY = \"\";\n        this.COHERE_VERSION = \"1\";\n    }\n    APIImpl.prototype.init = function (key) {\n        this.COHERE_API_KEY = key;\n    };\n    APIImpl.prototype.post = function (endpoint, data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        try {\n                            // workaround for js projects that pass json strings.\n                            data = JSON.parse(\"\".concat(data));\n                        }\n                        catch (e) { }\n                        var reqData = JSON.stringify(data);\n                        var req = https.request({\n                            hostname: URL.COHERE_API,\n                            path: \"/v\".concat(_this.COHERE_VERSION).concat(endpoint),\n                            method: \"POST\",\n                            headers: {\n                                \"Content-Type\": \"application/json; charset=utf-8\",\n                                \"Content-Length\": Buffer.byteLength(reqData, \"utf8\"),\n                                Authorization: \"Bearer \".concat(_this.COHERE_API_KEY),\n                                \"Request-Source\": \"node-sdk\",\n                            },\n                            timeout: 5000,\n                        }, function (res) {\n                            var data = [];\n                            res.on(\"data\", function (chunk) { return data.push(chunk); });\n                            res.on(\"end\", function () {\n                                if (\"x-api-warning\" in res.headers) {\n                                    var warnHeader = res.headers[\"x-api-warning\"];\n                                    if (typeof warnHeader === \"string\") {\n                                        console.warn(\"\\x1b[33mWarning: %s\\x1b[0m\", warnHeader);\n                                    }\n                                    else {\n                                        for (var warning in warnHeader) {\n                                            console.warn(\"\\x1b[33mWarning: %s\\x1b[0m\", warning);\n                                        }\n                                    }\n                                }\n                                resolve({\n                                    statusCode: res.statusCode,\n                                    body: JSON.parse(Buffer.concat(data).toString()),\n                                });\n                            });\n                        });\n                        req.on(\"error\", function (error) {\n                            return reject(error_service_1.default.handleError(error));\n                        });\n                        req.write(reqData, \"utf8\");\n                        req.end();\n                    })];\n            });\n        });\n    };\n    return APIImpl;\n}());\nvar API = new APIImpl();\nmodule.exports = API;\n","\"use strict\";\nvar errorImpl = /** @class */ (function () {\n    function errorImpl() {\n    }\n    errorImpl.prototype.handleError = function (error) {\n        var _a, _b, _c;\n        var status = ((_a = error.response) === null || _a === void 0 ? void 0 : _a.status) || 500;\n        var message = ((_c = (_b = error.response) === null || _b === void 0 ? void 0 : _b.data) === null || _c === void 0 ? void 0 : _c.message) || error.message;\n        return {\n            statusCode: status,\n            body: {\n                message: message,\n            },\n        };\n    };\n    return errorImpl;\n}());\nvar errors = new errorImpl();\nmodule.exports = errors;\n","module.exports = require(\"https\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(828);\n",""],"names":[],"sourceRoot":""}